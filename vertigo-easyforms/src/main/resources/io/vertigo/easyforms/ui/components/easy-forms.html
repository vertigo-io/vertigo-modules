<th:block th:fragment="easy-forms-edit(object, field, rowIndex, template, isI18nLabel, elem_attrs)" 
	vu:alias="easy-forms" vu:selector="${viewMode=='edit'}"
	th:assert="${object} != null and ${field} != null">
	
	<vu:include-data object="${object}" field="${field}" modifiable="true"/>
	
		<vui-easy-forms th:v-model="${model.util.vueDataKey(object, field, rowIndex)}" class="full-width" >
			<template v-slot:default="slotProps">
				<div class="row q-col-gutter-md">
					<th:block th:each="templateField : ${template.fields}"
					          th:with="fieldType = ${model.efoUiUtil.getFieldTypeByName(templateField.fieldTypeName)}, fieldParameters = ${model.efoUiUtil.getParametersForField(templateField)}">
					    <div th:attr="__${elem_attrs}__" class="col-12" >
							<div th::class="|{'fr-input-group--error' : efHasFormError(uiMessageStack, 'editField', '${templateField.code}')}|"
							      th:switch="${fieldType.uiComponentName}">
								<div th:case="'EfUicInternalMap'">
									<vu:label-edit object="${object}" field="${field}" th:label="${isI18nLabel != null && isI18nLabel ? '#{__${templateField.label}__}' : templateField.label}">
										<vu:slot name="after_label_slot">
											<!--/* We don't use required attribute on vu:label => Hack so that subsequent inputs don't have the red * */-->
											<span th:if="${templateField.isMandatory}" class="v-block__required"></span>
										</vu:slot>
										<vui-ef-map th:v-model="|slotProps.formData['${templateField.code}']|"
									            	th:value-label="#{EfUicMap$value}" th:label-Label="#{EfUicMap$label}" ></vui-ef-map>
									</vu:label-edit>
								</div>
								<div th:case="'EfUicRadio'">
									<vu:label-edit object="${object}" field="${field}" th:label="${isI18nLabel != null && isI18nLabel ? '#{__${templateField.label}__}' : templateField.label}" required="${templateField.isMandatory}">
										<q-option-group
									    	th:v-model="|slotProps.formData['${templateField.code}']|"
									    	th::options="${model.efoUiUtil.getDynamicListForField(templateField)}"
											th::inline="${(fieldParameters['radioLayout'] != null && fieldParameters['radioLayout'] == 'horizontal') ? true : false }"
									    	color="primary"
									    ></q-option-group>
									</vu:label-edit>
								</div>
								<div th:case="*">
									<q-input label-slot
											th:v-autofocus="|efHasFormError(uiMessageStack, ${field}, '${templateField.code}')|"
											th:v-model="|slotProps.formData['${templateField.code}']|"
											th::aria-describedby="|efHasFormError(uiMessageStack, ${field}, '${templateField.code}') ? 'text-input-${templateField.code}-${templateField.order}-desc-error' : null|"
											th::aria-invalid="|efHasFormError(uiMessageStack, ${field}, '${templateField.code}')|" 
											th:id="|text-input-${templateField.code}-${templateField.order}|"
											th::error="|efHasFormError(uiMessageStack, ${field}, '${templateField.code}')|" 
											th::error-message="|efGetFormError(uiMessageStack, ${field}, '${templateField.code}')|"
											th:type="${fieldType.uiComponentName == 'textfield' ? 'text' : (fieldType.uiComponentName == 'date' ? 'date' : 'text')}"
											th:autocomplete="${fieldParameters['textFieldAutocomplete']}"
											th:maxlength="${model.efoUiUtil.smartTypeMaxLength(templateField.fieldTypeName)}"
											orientation="vertical"
											stack-label
											th:classappend="${templateField.isMandatory?'v-field__required':''}"
											th:aria-required="${templateField.isMandatory}" >
											<template v-slot:label>
											  <div class="row items-center all-pointer-events non-selectable" style="display: inline-block;">
											    <div vu:text="${templateField.label}" />
											    <q-tooltip th:if="${templateField.tooltip}" class="bg-grey-8" anchor="top left" self="bottom left" :delay="300" :offset="[0, 8]"><div vu:text="${templateField.tooltip}"/></q-tooltip>
											  </div>
											</template>
									</q-input>
								</div>
							</div>
						</div>
					</th:block>
				</div>
			</template>
		</vui-easy-forms>
	<input type="hidden" th::name="${model.util.contextKey(object, field, rowIndex)}" th:v-bind:value="|JSON.stringify(${model.util.vueDataKey(object, field, rowIndex)})|" />
</th:block>

<th:block th:fragment="easy-forms-read(object, field, rowIndex, template, isI18nLabel, elem_attrs)" 
	vu:alias="easy-forms" vu:selector="${viewMode=='read'}"
	th:assert="${object} != null and ${field} != null">
	
	<vu:include-data object="${object}" field="${field}"/>
	
	<div class="row q-col-gutter-md">
		<div th:attr="__${elem_attrs}__" class="col-12" th:v-for="|(value, name) in ${model.efoUiUtil.getEasyFormRead(template, object, field, rowIndex)}|">
	         <q-field :label="name" orientation="vertical" stack-label readonly borderless >
	             {{ value }}
	         </q-field>
	    </div>
    </div>
</th:block>